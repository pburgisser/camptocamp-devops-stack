{
  "version": 4,
  "terraform_version": "0.14.6",
  "serial": 8,
  "lineage": "bda42a8a-a60e-9fa8-cd52-188cdf97e5ce",
  "outputs": {},
  "resources": [
    {
      "module": "module.argocd.module.argocd",
      "mode": "data",
      "type": "kubernetes_secret",
      "name": "argocd_secret",
      "provider": "module.argocd.provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "data": {
              "admin.password": "$2a$10$54yravjZPt9C8beA8YW1n.mgs2eCbkFbUv9.aH.7outCPkjVNQALm",
              "admin.passwordMtime": "2021-03-10T17:29:34Z",
              "server.secretkey": "UoY9RzixWdBKlbYwQmbLZXGUL1JB8VBTanvLEhjHZUg=",
              "tls.crt": "-----BEGIN CERTIFICATE-----\nMIIDZjCCAk6gAwIBAgIRAPLfrzO53huaa0/waDIAy50wDQYJKoZIhvcNAQELBQAw\nEjEQMA4GA1UEChMHQXJnbyBDRDAeFw0yMTAzMTAxNzI5MzRaFw0yMjAzMTAxNzI5\nMzRaMBIxEDAOBgNVBAoTB0FyZ28gQ0QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw\nggEKAoIBAQDOVM8W+hFSuWjoFkYVRa6/RXV1nsSVMwsuOQzOgg1Qn+/rT7FrHPQx\nMknousx2kOWHNSyTrq9qxn+6GzfedttO+A6TCjH+7wCsnF7yCYHI1mO/haW1YGMz\nCge75v7rcPw3ANCQLZADGdTi5vzExSD/W4AAmpoHi0rouLQr1uaO//NkKp1Y8xEP\nHTD2qakuRx/s0yCS+aFOPDzaSrfqyZEBl9YjedhrVLkKiOegPA9++iEo7Ao1Ind/\nV0s5//F+SOycs53U1mdFmMYCnWX2HPVdvsP3a8/3BdzqmVW15vAfjud11BXG9GBQ\noIYC5djWAytbd/QZq9DsA+0/Um4/S+CDAgMBAAGjgbYwgbMwDgYDVR0PAQH/BAQD\nAgKkMBMGA1UdJQQMMAoGCCsGAQUFBwMBMA8GA1UdEwEB/wQFMAMBAf8wewYDVR0R\nBHQwcoIJbG9jYWxob3N0gg1hcmdvY2Qtc2VydmVyghRhcmdvY2Qtc2VydmVyLmFy\nZ29jZIIYYXJnb2NkLXNlcnZlci5hcmdvY2Quc3ZjgiZhcmdvY2Qtc2VydmVyLmFy\nZ29jZC5zdmMuY2x1c3Rlci5sb2NhbDANBgkqhkiG9w0BAQsFAAOCAQEAiSJgbaxw\nmptNQW0FiEUuERA+fV9VKxlRIxnfzuAuCrO3S8COx/nA8agbUJLMxQDPgGrIzGmC\n2KDggZVssi2IoDt8AfHp51I9cGA7G9fQsGdY8ZVzHkCAOA44++W3KspfnRtho7jO\nDkKB7yNHqrkcq88Y4Ajaue8V/eB85WZvv3LfudYzmlTLXz2tL42d0TxRZCdGWIEV\n+//KZS4BNcJCFP090k5bgmkNZ4HcdVoNXZWRcHuPdD0xMEvChcqclCBWtcLkNo3a\nQA+o0lRtLmr7kU/2l/iM+1dsQgOMnvt3IPy5+zkZJOSfjXhlczex6EnZ1kBFjazM\nQwVIFMODGM0KaQ==\n-----END CERTIFICATE-----\n",
              "tls.key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAzlTPFvoRUrlo6BZGFUWuv0V1dZ7ElTMLLjkMzoINUJ/v60+x\naxz0MTJJ6LrMdpDlhzUsk66vasZ/uhs33nbbTvgOkwox/u8ArJxe8gmByNZjv4Wl\ntWBjMwoHu+b+63D8NwDQkC2QAxnU4ub8xMUg/1uAAJqaB4tK6Li0K9bmjv/zZCqd\nWPMRDx0w9qmpLkcf7NMgkvmhTjw82kq36smRAZfWI3nYa1S5CojnoDwPfvohKOwK\nNSJ3f1dLOf/xfkjsnLOd1NZnRZjGAp1l9hz1Xb7D92vP9wXc6plVtebwH47nddQV\nxvRgUKCGAuXY1gMrW3f0GavQ7APtP1JuP0vggwIDAQABAoIBAQC6ClY/zXLZODyT\nJ6JBg/cwl5x1VZbDQKcQInidqz3+OHfHoK/EePLleQaTRfsd3UBYTWXIM3YPvLNm\nRyx09o6AAcKCamryBuaAvO4PJutS/5wpEIR9qk9Hsf+POZUZDWMc5SspFSwI373I\naaX4dhZuqT4dTUkdDEea1w/9h2OUAy1E7I2Ba0GR6Y1H1lBymv0T16pVnjMwFxX3\n0bMTczfQGN6mxq0nfdAYYBdI47gJ6EoV2PfU9HAps4k0xVs1Cv1KzuFwFZy99z3A\nd7E+8HhhpoiN06NM8KzNoYqWCH3lNpdZv5Rk0DNcH1rvx0aEZ+GDF4uWzME6YnwS\nR2xozwPhAoGBANc+/T9Ukjoc8gFQLFpDOmU54yauEGXtMV7C6/csIN18wgdW1QaI\nz2ml4ENjz7/3G1y8ofMVoC9FvAp8NAsDeH8lIyu63sjM12Dt8pNlXt/KO8qeOb98\nJ9FBJ7xT5kDM4p9ugJTltBQ6rkOHK4bOwl/VtxJzyrKaf+oYzPcMHzdFAoGBAPVl\nuDIqmkEzqJB2AURGM8XP1rxe+T2JBxknKIA5aDTLp84St1hC20xIJuJWrkKu12t7\nVcNCmUpCtJet4KAzW4izR2c9nfA2yMum3XM+t6QQCrgaf6z5jyO0VV6SAfweBpAC\n7eUOfo8qH2xEXqP6ZukJvkDO5Tmqy6OupGLWYXEnAoGAWzP0aHY0M216WXYYJPLh\ndmzNw+DzT8zuI2HiS+wlzNOE/0kaoFct020Wlldfes6AiI3g7TgXlJAuuh6gip4g\n23bn7SqUJW8uP4LzSuMkDR0KsrLSc0FvOaoq5RCDuqdVywoub2jZIc0vc6t9lPRc\nxfCvTqFDnOP8GTwC9RbszyUCgYEAxE7iIieYjK5Rm3b7Hm32frj8NGbZhdN3fTSp\nHqJN7WY50A2C5DVfj09s48Wp06hgphfdDL3bON/R7kDnn+BVyi544WsWTJLW4KuV\nHds/NxyqJor0NiDR1CMv495zfgdbApuFSablsYtl5ctv1ke7SZNEwj2AfDhYfZF4\n6aRMASMCgYEAmK5ufGnGQIf4871TsBNDOlwsb/pgTXiyjkQvv+V5i3qeLHCVCowo\n9qEXwwdHH5nCYOOP8rfZ9ypizDMC5d+Eh+LG1S+0GdmRdjRs5fBjjWNxajL6kfo3\nbrXi4RrwCPt0DKcGYXaQbRcJFX/YwUfFmDs6jPRS5ki9A+PNCmxJHAI=\n-----END RSA PRIVATE KEY-----\n"
            },
            "id": "argocd/argocd-secret",
            "metadata": [
              {
                "annotations": {
                  "meta.helm.sh/release-name": "argocd",
                  "meta.helm.sh/release-namespace": "argocd"
                },
                "generation": 0,
                "labels": {
                  "helm.sh/chart": "argo-cd-2.14.7"
                },
                "name": "argocd-secret",
                "namespace": "argocd",
                "resource_version": "118681",
                "self_link": "",
                "uid": "46a07ef9-8a5c-4d74-8ef5-bb51c4a52623"
              }
            ],
            "type": "Opaque"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.argocd.module.argocd",
      "mode": "managed",
      "type": "helm_release",
      "name": "app_of_apps",
      "provider": "module.argocd.provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "../../modules/argocd-helm/../../argocd/app-of-apps",
            "cleanup_on_fail": false,
            "create_namespace": true,
            "dependency_update": true,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "app-of-apps",
            "keyring": null,
            "lint": false,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "",
                "chart": "app-of-apps",
                "name": "app-of-apps",
                "namespace": "argocd",
                "revision": 1,
                "values": "{\"apps\":{\"aad-pod-identity\":{\"enabled\":false},\"apps\":{\"enabled\":true},\"argocd\":{\"enabled\":true},\"cert-manager\":{\"enabled\":true},\"csi-secrets-store-provider-azure\":{\"enabled\":false},\"efs-provisioner\":{\"enabled\":false},\"keycloak\":{\"enabled\":false},\"kube-prometheus-stack\":{\"enabled\":true},\"loki-stack\":{\"enabled\":true},\"metrics-server\":{\"enabled\":true},\"minio\":{\"enabled\":false},\"namespaces\":{\"enabled\":true},\"secrets-store-csi-driver\":{\"enabled\":false},\"traefik\":{\"enabled\":true},\"vault\":{\"enabled\":false}},\"argo-cd\":{\"configs\":{\"secret\":{\"extra\":{\"accounts.pipeline.tokens\":\"[{\\\"iat\\\":1615397361,\\\"id\\\":\\\"60003cde-bf57-5a5a-a538-98861563f5a0\\\"}]\",\"oidc.default.clientSecret\":null}}},\"controller\":{\"metrics\":{\"enabled\":true}},\"dex\":{\"metrics\":{\"enabled\":true}},\"repoServer\":{\"metrics\":{\"enabled\":true}},\"server\":{\"config\":{\"oidc.config\":\"name: OIDC\\nissuer: \\nclientID: \\nclientSecret: $oidc.default.clientSecret\\nrequestedIDTokenClaims:\\n  groups:\\n    essential: true\\nrequestedScopes:\\n  - openid\\n  - profile\\n  - email\\n\",\"url\":\"https://argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"},\"ingress\":{\"annotations\":{\"cert-manager.io/cluster-issuer\":\"letsencrypt-prod\",\"ingress.kubernetes.io/ssl-redirect\":\"true\",\"kubernetes.io/ingress.allow-http\":\"false\",\"traefik.ingress.kubernetes.io/router.entrypoints\":\"websecure\",\"traefik.ingress.kubernetes.io/router.tls\":\"true\"},\"enabled\":true,\"hosts\":[\"argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"argocd.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"tls\":[{\"hosts\":[\"argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"argocd.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"secretName\":\"argocd-tls\"}]},\"metrics\":{\"enabled\":true},\"rbacConfig\":{\"policy.csv\":\"g, pipeline, role:readonly\\ng, argocd-admin, role:admin\\n\",\"policy.default\":\"role:readonly\",\"scopes\":\"[groups, cognito:groups, roles]\"}}},\"cert-manager\":{},\"efs-provisioner\":{},\"extraApps\":[],\"keycloak\":{\"ingress\":{\"annotations\":{\"cert-manager.io/cluster-issuer\":\"letsencrypt-prod\",\"ingress.kubernetes.io/ssl-redirect\":\"true\",\"kubernetes.io/ingress.allow-http\":\"false\",\"traefik.ingress.kubernetes.io/router.entrypoints\":\"websecure\",\"traefik.ingress.kubernetes.io/router.tls\":\"true\"},\"enabled\":true,\"hosts\":[{\"host\":\"keycloak.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"paths\":[\"/\"]},{\"host\":\"keycloak.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"paths\":[\"/\"]}],\"tls\":[{\"hosts\":[\"keycloak.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"keycloak.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"secretName\":\"keycloak-tls\"}]},\"keycloakClient\":{\"client\":{\"clientId\":null,\"redirectUris\":[\"https://argocd.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/auth/callback\",\"https://argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/auth/callback\",\"https://grafana.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/login/generic_oauth\",\"https://grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/login/generic_oauth\",\"https://prometheus.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\",\"https://prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\",\"https://alertmanager.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\",\"https://alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\"],\"secret\":null}},\"keycloakUser\":{\"password\":\"\"},\"service\":{\"annotations\":{\"traefik.ingress.kubernetes.io/service.serversscheme\":\"https\"}}},\"kube-prometheus-stack\":{\"alertmanager\":{\"alertmanagerSpec\":{\"containers\":[{\"args\":[\"--http-address=0.0.0.0:9095\",\"--upstream=http://localhost:9093\",\"--provider=oidc\",\"--oidc-issuer-url=\",\"--client-id=\",\"--client-secret=\",\"--cookie-secure=false\",\"--cookie-secret=EaU5buaFiVHxrdd2\",\"--email-domain=*\",\"--redirect-url=https://alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\"],\"image\":\"quay.io/oauth2-proxy/oauth2-proxy:v7.0.0\",\"name\":\"alertmanager-proxy\",\"ports\":[{\"containerPort\":9095,\"name\":\"web\"}]}]},\"ingress\":{\"annotations\":{\"cert-manager.io/cluster-issuer\":\"letsencrypt-prod\",\"ingress.kubernetes.io/ssl-redirect\":\"true\",\"kubernetes.io/ingress.allow-http\":\"false\",\"traefik.ingress.kubernetes.io/router.entrypoints\":\"websecure\",\"traefik.ingress.kubernetes.io/router.tls\":\"true\"},\"enabled\":true,\"hosts\":[\"alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"alertmanager.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"tls\":[{\"hosts\":[\"alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"alertmanager.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"secretName\":\"alertmanager-tls\"}]},\"service\":{\"targetPort\":9095},\"serviceMonitor\":{\"selfMonitor\":false}},\"grafana\":{\"additionalDataSources\":[{\"access\":\"proxy\",\"isDefault\":true,\"jsonData\":{\"oauthPassThru\":true,\"tlsAuth\":false,\"tlsAuthWithCACert\":false},\"name\":\"Prometheus\",\"type\":\"prometheus\",\"url\":\"http://kube-prometheus-stack-prometheus:9090/\"}],\"grafana.ini\":{\"auth.generic_oauth\":{\"allow_sign_up\":true,\"api_url\":null,\"auth_url\":null,\"client_id\":null,\"client_secret\":null,\"enabled\":true,\"scopes\":\"openid profile email\",\"token_url\":null},\"server\":{\"domain\":\"grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"root_url\":\"https://%(domain)s\"}},\"ingress\":{\"annotations\":{\"cert-manager.io/cluster-issuer\":\"letsencrypt-prod\",\"ingress.kubernetes.io/ssl-redirect\":\"true\",\"kubernetes.io/ingress.allow-http\":\"false\",\"traefik.ingress.kubernetes.io/router.entrypoints\":\"websecure\",\"traefik.ingress.kubernetes.io/router.tls\":\"true\"},\"enabled\":true,\"hosts\":[\"grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"grafana.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"tls\":[{\"hosts\":[\"grafana.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"secretName\":\"grafana-tls\"}]},\"sidecar\":{\"datasources\":{\"defaultDatasourceEnabled\":false}}},\"prometheus\":{\"additionalPodMonitors\":[{\"name\":\"alertmanager\",\"namespaceSelector\":{\"matchNames\":[\"kube-prometheus-stack\"]},\"podMetricsEndpoints\":[{\"path\":\"/metrics\",\"targetPort\":9093}],\"selector\":{\"matchLabels\":{\"alertmanager\":\"kube-prometheus-stack-alertmanager\",\"app\":\"alertmanager\"}}},{\"name\":\"prometheus\",\"namespaceSelector\":{\"matchNames\":[\"kube-prometheus-stack\"]},\"podMetricsEndpoints\":[{\"path\":\"/metrics\",\"targetPort\":9090}],\"selector\":{\"matchLabels\":{\"app\":\"prometheus\",\"prometheus\":\"kube-prometheus-stack-prometheus\"}}}],\"ingress\":{\"annotations\":{\"cert-manager.io/cluster-issuer\":\"letsencrypt-prod\",\"ingress.kubernetes.io/ssl-redirect\":\"true\",\"kubernetes.io/ingress.allow-http\":\"false\",\"traefik.ingress.kubernetes.io/router.entrypoints\":\"websecure\",\"traefik.ingress.kubernetes.io/router.tls\":\"true\"},\"enabled\":true,\"hosts\":[\"prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"prometheus.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"tls\":[{\"hosts\":[\"prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\",\"prometheus.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\"],\"secretName\":\"prometheus-tls\"}]},\"prometheusSpec\":{\"alertingEndpoints\":[{\"name\":\"kube-prometheus-stack-alertmanager\",\"namespace\":\"kube-prometheus-stack\",\"port\":9093}],\"containers\":[{\"args\":[\"--http-address=0.0.0.0:9091\",\"--upstream=http://localhost:9090\",\"--provider=oidc\",\"--oidc-issuer-url=\",\"--client-id=\",\"--client-secret=\",\"--cookie-secure=false\",\"--cookie-secret=EaU5buaFiVHxrdd2\",\"--email-domain=*\",\"--redirect-url=https://prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\"],\"image\":\"quay.io/oauth2-proxy/oauth2-proxy:v7.0.0\",\"name\":\"prometheus-proxy\",\"ports\":[{\"containerPort\":9091,\"name\":\"proxy\"}]}],\"portName\":\"proxy\"},\"service\":{\"additionalPorts\":[{\"name\":\"web\",\"port\":9090,\"targetPort\":9090}],\"port\":9091,\"targetPort\":9091},\"serviceMonitor\":{\"selfMonitor\":false}}},\"loki-stack\":{},\"metrics-server\":{},\"secrets-store-csi-driver\":{},\"spec\":{\"destination\":{\"server\":\"https://kubernetes.default.svc\"},\"source\":{\"repoURL\":\"https://github.com/camptocamp/camptocamp-devops-stack.git\",\"targetRevision\":\"v0.28.0\"},\"syncPolicy\":{\"automated\":{\"prune\":true,\"selfHeal\":true}}},\"traefik\":{},\"vault\":{}}",
                "version": "0"
              }
            ],
            "name": "app-of-apps",
            "namespace": "argocd",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": null,
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 300,
            "values": [
              "---\nspec:\n  destination:\n    server: https://kubernetes.default.svc\n  source:\n    repoURL: https://github.com/camptocamp/camptocamp-devops-stack.git\n    targetRevision: v0.28.0\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n\napps:\n  aad-pod-identity:\n    enabled: false\n  apps:\n    enabled: true\n  argocd:\n    enabled: true\n  cert-manager:\n    enabled: true\n  csi-secrets-store-provider-azure:\n    enabled: false\n  efs-provisioner:\n    enabled: false\n  keycloak:\n    enabled: false\n  kube-prometheus-stack:\n    enabled: true\n  loki-stack:\n    enabled: true\n  metrics-server:\n    enabled: true\n  minio:\n    enabled: false\n  namespaces:\n    enabled: true\n  secrets-store-csi-driver:\n    enabled: false\n  traefik:\n    enabled: true\n  vault:\n    enabled: false\n\n\"extraApps\": []\n\n\nargo-cd:\n  configs:\n    secret:\n      extra:\n        oidc.default.clientSecret: \n        accounts.pipeline.tokens: '[{\"iat\":1615397361,\"id\":\"60003cde-bf57-5a5a-a538-98861563f5a0\"}]'\n  controller:\n    metrics:\n      enabled: true\n  dex:\n    metrics:\n      enabled: true\n  repoServer:\n    metrics:\n      enabled: true\n  server:\n    config:\n      url: https://argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n      oidc.config: |\n        name: OIDC\n        issuer: \n        clientID: \n        clientSecret: $oidc.default.clientSecret\n        requestedIDTokenClaims:\n          groups:\n            essential: true\n        requestedScopes:\n          - openid\n          - profile\n          - email\n    ingress:\n      enabled: true\n      annotations:\n        cert-manager.io/cluster-issuer: letsencrypt-prod\n        traefik.ingress.kubernetes.io/router.entrypoints: websecure\n        traefik.ingress.kubernetes.io/router.tls: \"true\"\n        ingress.kubernetes.io/ssl-redirect: \"true\"\n        kubernetes.io/ingress.allow-http: \"false\"\n      hosts:\n        - argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n        - argocd.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n      tls:\n        - secretName: argocd-tls\n          hosts:\n            - argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n            - argocd.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n    metrics:\n      enabled: true\n    rbacConfig:\n      policy.default: role:readonly\n      policy.csv: |\n        g, pipeline, role:readonly\n        g, argocd-admin, role:admin\n      scopes: '[groups, cognito:groups, roles]'\n\ncert-manager: {}\n\nefs-provisioner: {}\n\nkeycloak:\n  ingress:\n    enabled: true\n    annotations:\n      cert-manager.io/cluster-issuer: letsencrypt-prod\n      traefik.ingress.kubernetes.io/router.entrypoints: websecure\n      traefik.ingress.kubernetes.io/router.tls: \"true\"\n      ingress.kubernetes.io/ssl-redirect: \"true\"\n      kubernetes.io/ingress.allow-http: \"false\"\n    hosts:\n      - host: keycloak.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n        paths:\n          - /\n      - host: keycloak.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n        paths:\n          - /\n    tls:\n      - secretName: keycloak-tls\n        hosts:\n          - keycloak.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n          - keycloak.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n  service:\n    annotations:\n      traefik.ingress.kubernetes.io/service.serversscheme: https\n  keycloakClient:\n    client:\n      clientId: \n      secret: \n      redirectUris:\n        - https://argocd.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/auth/callback\n        - https://argocd.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/auth/callback\n        - https://grafana.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/login/generic_oauth\n        - https://grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/login/generic_oauth\n        - https://prometheus.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\n        - https://prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\n        - https://alertmanager.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\n        - https://alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\n  keycloakUser:\n    password: \"\"\n\nkube-prometheus-stack:\n  alertmanager:\n    alertmanagerSpec:\n      containers:\n        - args:\n            - --http-address=0.0.0.0:9095\n            - --upstream=http://localhost:9093\n            - --provider=oidc\n            - --oidc-issuer-url=\n            - --client-id=\n            - --client-secret=\n            - --cookie-secure=false\n            - --cookie-secret=EaU5buaFiVHxrdd2\n            - --email-domain=*\n            - --redirect-url=https://alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\n            \n          image: quay.io/oauth2-proxy/oauth2-proxy:v7.0.0\n          name: alertmanager-proxy\n          ports:\n            - containerPort: 9095\n              name: web\n    ingress:\n      enabled: true\n      annotations:\n        cert-manager.io/cluster-issuer: letsencrypt-prod\n        traefik.ingress.kubernetes.io/router.entrypoints: websecure\n        traefik.ingress.kubernetes.io/router.tls: \"true\"\n        ingress.kubernetes.io/ssl-redirect: \"true\"\n        kubernetes.io/ingress.allow-http: \"false\"\n      hosts:\n        - alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n        - alertmanager.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n      tls:\n        - secretName: alertmanager-tls\n          hosts:\n            - alertmanager.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n            - alertmanager.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n    service:\n      targetPort: 9095\n    serviceMonitor:\n      selfMonitor: false\n\n  grafana:\n    grafana.ini:\n      auth.generic_oauth:\n        enabled: true\n        allow_sign_up: true\n        client_id: \n        client_secret: \n        scopes: \"openid profile email\"\n        auth_url: \n        token_url: \n        api_url: \n        \n      server:\n        domain: grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n        root_url: \"https://%(domain)s\"\n    sidecar:\n      datasources:\n        defaultDatasourceEnabled: false\n    additionalDataSources:\n      - name: Prometheus\n        type: prometheus\n        # TODO: fix this 9091 with oauthPassThru\n        #url: http://kube-prometheus-stack-prometheus:9091/\n        url: http://kube-prometheus-stack-prometheus:9090/\n        access: proxy\n        isDefault: true\n        jsonData:\n          tlsAuth: false\n          tlsAuthWithCACert: false\n          oauthPassThru: true\n    ingress:\n      enabled: true\n      annotations:\n        cert-manager.io/cluster-issuer: letsencrypt-prod\n        traefik.ingress.kubernetes.io/router.entrypoints: websecure\n        traefik.ingress.kubernetes.io/router.tls: \"true\"\n        ingress.kubernetes.io/ssl-redirect: \"true\"\n        kubernetes.io/ingress.allow-http: \"false\"\n      hosts:\n        - grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n        - grafana.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n      tls:\n        - secretName: grafana-tls\n          hosts:\n            - grafana.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n            - grafana.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n\n  prometheus:\n    ingress:\n      enabled: true\n      annotations:\n        cert-manager.io/cluster-issuer: letsencrypt-prod\n        traefik.ingress.kubernetes.io/router.entrypoints: websecure\n        traefik.ingress.kubernetes.io/router.tls: \"true\"\n        ingress.kubernetes.io/ssl-redirect: \"true\"\n        kubernetes.io/ingress.allow-http: \"false\"\n      hosts:\n        - prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n        - prometheus.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n      tls:\n        - secretName: prometheus-tls\n          hosts:\n            - prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n            - prometheus.apps.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com\n    prometheusSpec:\n\n      portName: proxy\n      containers:\n        - args:\n            - --http-address=0.0.0.0:9091\n            - --upstream=http://localhost:9090\n            - --provider=oidc\n            - --oidc-issuer-url=\n            - --client-id=\n            - --client-secret=\n            - --cookie-secure=false\n            - --cookie-secret=EaU5buaFiVHxrdd2\n            - --email-domain=*\n            - --redirect-url=https://prometheus.apps.default.https://console-openshift-console.apps.ocppbu43.labs.camptocamp.com/oauth2/callback\n            \n          image: quay.io/oauth2-proxy/oauth2-proxy:v7.0.0\n          name: prometheus-proxy\n          ports:\n            - containerPort: 9091\n              name: proxy\n      alertingEndpoints:\n        - name: kube-prometheus-stack-alertmanager\n          namespace: kube-prometheus-stack\n          port: 9093\n    service:\n      port: 9091\n      targetPort: 9091\n      additionalPorts:\n        - name: web\n          port: 9090\n          targetPort: 9090\n    serviceMonitor:\n      selfMonitor: false\n    additionalPodMonitors:\n      - name: alertmanager\n        podMetricsEndpoints:\n          - path: /metrics\n            targetPort: 9093\n        namespaceSelector:\n          matchNames:\n          - kube-prometheus-stack\n        selector:\n          matchLabels:\n            alertmanager: kube-prometheus-stack-alertmanager\n            app: alertmanager\n      - name: prometheus\n        podMetricsEndpoints:\n          - path: /metrics\n            targetPort: 9090\n        namespaceSelector:\n          matchNames:\n          - kube-prometheus-stack\n        selector:\n          matchLabels:\n            app: prometheus\n            prometheus: kube-prometheus-stack-prometheus\n\nloki-stack: {}\n\nmetrics-server: {}\n\n\n\nsecrets-store-csi-driver: {}\n\ntraefik: {}\n\nvault: {}\n"
            ],
            "verify": false,
            "version": "0",
            "wait": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.argocd.module.argocd.helm_release.argocd",
            "module.argocd.module.argocd.random_password.oauth2_cookie_secret",
            "module.argocd.module.argocd.random_uuid.jti",
            "module.argocd.module.argocd.time_static.iat"
          ]
        }
      ]
    },
    {
      "module": "module.argocd.module.argocd",
      "mode": "managed",
      "type": "helm_release",
      "name": "argocd",
      "provider": "module.argocd.provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "argo-cd",
            "cleanup_on_fail": false,
            "create_namespace": true,
            "dependency_update": true,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "argocd",
            "keyring": null,
            "lint": false,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "1.8.4",
                "chart": "argo-cd",
                "name": "argocd",
                "namespace": "argocd",
                "revision": 1,
                "values": "{\"openshift\":{\"enabled\":true},\"redis\":{\"securityContext\":false},\"server\":{\"route\":{\"enabled\":true}}}",
                "version": "2.14.7"
              }
            ],
            "name": "argocd",
            "namespace": "argocd",
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://argoproj.github.io/argo-helm",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 180,
            "values": [
              "openshift:\n  enabled: true\nredis:\n  securityContext: false\nserver:\n  route:\n    enabled: true\n"
            ],
            "verify": false,
            "version": "2.14.7",
            "wait": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.argocd.module.argocd",
      "mode": "managed",
      "type": "jwt_hashed_token",
      "name": "argocd",
      "provider": "provider[\"registry.terraform.io/camptocamp/jwt\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "algorithm": "HS256",
            "claims_json": "{\"iat\":1615397361,\"iss\":\"argocd\",\"jti\":\"60003cde-bf57-5a5a-a538-98861563f5a0\",\"nbf\":1615397361,\"sub\":\"pipeline\"}",
            "id": "{\"iat\":1615397361,\"iss\":\"argocd\",\"jti\":\"60003cde-bf57-5a5a-a538-98861563f5a0\",\"nbf\":1615397361,\"sub\":\"pipeline\"}",
            "secret": "UoY9RzixWdBKlbYwQmbLZXGUL1JB8VBTanvLEhjHZUg=",
            "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2MTUzOTczNjEsImlzcyI6ImFyZ29jZCIsImp0aSI6IjYwMDAzY2RlLWJmNTctNWE1YS1hNTM4LTk4ODYxNTYzZjVhMCIsIm5iZiI6MTYxNTM5NzM2MSwic3ViIjoicGlwZWxpbmUifQ.C6HJ4IqpLlfjsy05x3QoLMOEv_v8k2dy-pebrJq6M_s"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.argocd.module.argocd.data.kubernetes_secret.argocd_secret",
            "module.argocd.module.argocd.helm_release.argocd",
            "module.argocd.module.argocd.random_uuid.jti",
            "module.argocd.module.argocd.time_static.iat"
          ]
        }
      ]
    },
    {
      "module": "module.argocd.module.argocd",
      "mode": "managed",
      "type": "random_password",
      "name": "oauth2_cookie_secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "none",
            "keepers": null,
            "length": 16,
            "lower": true,
            "min_lower": 0,
            "min_numeric": 0,
            "min_special": 0,
            "min_upper": 0,
            "number": true,
            "override_special": null,
            "result": "EaU5buaFiVHxrdd2",
            "special": false,
            "upper": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.argocd.module.argocd",
      "mode": "managed",
      "type": "random_uuid",
      "name": "jti",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "60003cde-bf57-5a5a-a538-98861563f5a0",
            "keepers": null,
            "result": "60003cde-bf57-5a5a-a538-98861563f5a0"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.argocd.module.argocd",
      "mode": "managed",
      "type": "time_static",
      "name": "iat",
      "provider": "provider[\"registry.terraform.io/hashicorp/time\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "day": 10,
            "hour": 17,
            "id": "2021-03-10T17:29:21Z",
            "minute": 29,
            "month": 3,
            "rfc3339": "2021-03-10T17:29:21Z",
            "second": 21,
            "triggers": null,
            "unix": 1615397361,
            "year": 2021
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    }
  ]
}
